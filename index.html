<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GPO Emergency Dashboard</title>
  <style>
    :root {
      --accent-color: #007acc;
      --bg-color: #f9f9f9;
      --text-color: #111;
      --card-bg: #fff;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
    }

    header {
      background-color: var(--accent-color);
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }

    nav {
      width: 220px;
      background-color: #e6e6e6;
      height: 100vh;
      padding: 1rem;
      box-sizing: border-box;
    }

    nav h3 {
      margin-top: 0;
    }

    nav select {
      width: 100%;
      padding: 6px;
      margin-bottom: 1rem;
    }

    nav ul {
      list-style: none;
      padding: 0;
    }

    nav li {
      margin: 10px 0;
    }

    .main {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
    }

    .card {
      background-color: var(--card-bg);
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 1rem;
      margin-bottom: 1.5rem;
    }

    iframe {
      width: 100%;
      height: 400px;
      border: none;
    }
  </style>
</head>
<body>
  <nav>
    <h3>GPO Dashboard</h3>
    <label for="regionSelect">🌍 Select Region:</label>
    <select id="regionSelect">
      <option value="australia">Australia</option>
      <option value="usa">USA</option>
    </select>
    <ul>
      <li><a href="#weather">🌤️ Forecast & Radar</a></li>
      <li><a href="#power">⚡ Power Outages</a></li>
      <li><a href="#guides">📘 Preparedness Guides</a></li>
      <li><a href="#links">🌐 Emergency Links</a></li>
    </ul>
  </nav>

  <div class="main">
    <header>📍 Emergency Weather Dashboard</header>

    <section id="weather" class="card">
      <h2>🌤️ 3-Day Forecast</h2>
      <input type="text" id="cityInput" placeholder="Enter your city" />
      <div id="forecast"></div>

      <h3>🌧️ Live Radar Viewer</h3>
      <iframe src="https://www.rainviewer.com/map.html?loc=auto&overlay=radar&layer=radar&sm=1&sn=1&hu=1"></iframe>
    </section>

    <section id="power" class="card">
      <h2>⚡ Power Outage Information</h2>
      <div id="powerLinks"></div>
    </section>

    <section id="guides" class="card">
      <h2>📘 Emergency Preparedness Guides</h2>

      <h3>🌀 Cyclone Preparation</h3>
      <ul>
        <li>Trim trees and secure loose items.</li>
        <li>Have an evacuation plan and emergency supplies.</li>
      </ul>

      <h3>🌊 Flood Safety Tips</h3>
      <ul>
        <li>Never enter floodwaters.</li>
        <li>Prepare sandbags and move items to higher ground.</li>
      </ul>

      <h3>🔥 Bushfire Survival Guide</h3>
      <ul>
        <li>Clear gutters and dry vegetation.</li>
        <li>Have a fire plan and listen for alerts.</li>
      </ul>
    </section>

    <section id="links" class="card">
      <h2>🌐 Emergency Resources</h2>
      <div id="disasterLinks"></div>
    </section>
  </div>

  <script>
    const regionSelect = document.getElementById("regionSelect");
    const powerLinks = document.getElementById("powerLinks");
    const disasterLinks = document.getElementById("disasterLinks");

    function updateRegion(region) {
      if (region === "australia") {
        powerLinks.innerHTML = `
          <ul>
            <li><a href="https://www.ergon.com.au/network/outages-and-disruptions/power-outages" target="_blank">Ergon Outages (QLD)</a></li>
            <li><a href="https://www.essentialenergy.com.au/outages" target="_blank">Essential Energy (NSW)</a></li>
          </ul>`;

        disasterLinks.innerHTML = `
          <ul>
            <li><a href="https://www.qfes.qld.gov.au/" target="_blank">Queensland Fire & Emergency</a></li>
            <li><a href="https://www.ses.nsw.gov.au/" target="_blank">NSW SES</a></li>
            <li><a href="https://www.bom.gov.au/" target="_blank">Bureau of Meteorology</a></li>
          </ul>`;

      } else if (region === "usa") {
        powerLinks.innerHTML = `
          <ul>
            <li><a href="https://poweroutage.us/" target="_blank">PowerOutage.us</a></li>
            <li><a href="https://outagemap.duke-energy.com/" target="_blank">Duke Energy Outage Map</a></li>
          </ul>`;

        disasterLinks.innerHTML = `
          <ul>
            <li><a href="https://www.ready.gov/" target="_blank">Ready.gov</a></li>
            <li><a href="https://www.weather.gov/" target="_blank">National Weather Service</a></li>
            <li><a href="https://www.fema.gov/" target="_blank">FEMA Disaster Response</a></li>
          </ul>`;
      }
    }

    regionSelect.addEventListener("change", (e) => {
      updateRegion(e.target.value);
    });

    updateRegion(regionSelect.value);

    // Forecast API
    const apiKey = "7498bac3fe87828473f5a0538b5e76c5";
    const input = document.getElementById("cityInput");
    const forecastEl = document.getElementById("forecast");

    input.addEventListener("input", () => {
      const query = input.value;
      if (query.length > 2) {
        fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${query}&appid=${apiKey}&units=metric`)
          .then(res => res.json())
          .then(data => {
            if (data.cod !== "200") {
              forecastEl.innerHTML = "<p>City not found.</p>";
              return;
            }
            const daily = {};
            data.list.forEach(item => {
              const date = item.dt_txt.split(" ")[0];
              if (!daily[date]) daily[date] = [];
              daily[date].push(item);
            });
            const days = Object.keys(daily).slice(0, 3);
            forecastEl.innerHTML = days.map(date => {
              const avgTemp = (daily[date].reduce((sum, val) => sum + val.main.temp, 0) / daily[date].length).toFixed(1);
              const description = daily[date][0].weather[0].description;
              return `<p><strong>${date}:</strong> ${description}, Avg Temp: ${avgTemp}°C</p>`;
            }).join("");
          });
      }
    });
  </script>
</body>
</html>



