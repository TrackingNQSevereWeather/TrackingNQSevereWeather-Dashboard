<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emergency Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">

  <header class="bg-red-600 text-white p-4 shadow">
    <h1 class="text-2xl font-bold">ğŸŒªï¸ Emergency Dashboard</h1>
    <p class="text-sm">Stay informed and prepared</p>
  </header>

  <main class="p-4 max-w-4xl mx-auto space-y-8">

    <!-- ğŸŒ City-Based Forecast Section -->
    <section class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-bold mb-2">ğŸŒ 3-Day Forecast</h2>
      <input
        id="city-input"
        type="text"
        placeholder="Enter your city..."
        class="w-full p-2 border rounded mb-4"
      />
      <button
        onclick="getWeatherForecast()"
        class="bg-blue-600 text-white px-4 py-2 rounded"
      >
        Get Forecast
      </button>
      <div id="forecast-output" class="mt-4"></div>
    </section>

    <!-- ğŸ§  AI Weather Summary (placeholder for future AI panel) -->
    <section class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-bold mb-2">ğŸ§  AI Weather Summary</h2>
      <p>Coming soon: a smart overview of severe weather based on radar and forecasts.</p>
    </section>

    <!-- ğŸ§° Preparedness Guides -->
    <section class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-bold mb-2">ğŸ§° Preparedness Guides</h2>
      <ul class="list-disc pl-5">
        <li><a href="#" class="text-blue-600 underline">Cyclone Safety Tips</a></li>
        <li><a href="#" class="text-blue-600 underline">Flood Emergency Plan</a></li>
        <li><a href="#" class="text-blue-600 underline">Bushfire Preparation</a></li>
      </ul>
    </section>

    <!-- ğŸ“¦ Supply Checklist Generator -->
    <section class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-bold mb-2">ğŸ“¦ Supply Checklist Generator</h2>
      <p>Coming soon: generate a checklist for emergencies based on your region and season.</p>
    </section>

  </main>

  <footer class="bg-gray-200 text-center text-sm p-4 mt-10">
    Made by TrackingNQSevereWeather Â© 2025
  </footer>

  <!-- Forecast Script -->
  <script>
    const apiKey = "7498bac3fe87828473f5a0538b5e76c5";

    async function getWeatherForecast() {
      const city = document.getElementById("city-input").value;
      if (!city) return alert("Please enter a city.");

      try {
        // Step 1: Get coordinates of the city
        const geoRes = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${apiKey}`);
        const geoData = await geoRes.json();
        if (!geoData.length) return alert("City not found.");

        const { lat, lon, name, state, country } = geoData[0];

        // Step 2: Get 3-day forecast
        const weatherRes = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`);
        const weatherData = await weatherRes.json();

        const forecastContainer = document.getElementById("forecast-output");
        forecastContainer.innerHTML = `<h3 class="font-semibold mb-2">Forecast for ${name}, ${state || country}</h3>`;

        const daily = weatherData.list.filter(item => item.dt_txt.includes("12:00:00")).slice(0, 3);
        const forecastHTML = daily.map(day => {
          const date = new Date(day.dt_txt).toLocaleDateString();
          const temp = day.main.temp.toFixed(1);
          const weather = day.weather[0].description;
          const icon = `https://openweathermap.org/img/wn/${day.weather[0].icon}@2x.png`;

          return `<div class="border p-2 rounded mb-2">
            <strong>${date}</strong><br>
            <img src="${icon}" alt="${weather}" class="inline w-10">
            ${weather}, ${temp}Â°C
          </div>`;
        }).join("");

        forecastContainer.innerHTML += forecastHTML;
      } catch (error) {
        console.error("Forecast error:", error);
        alert("Failed to load forecast. Try again later.");
      }
    }
  </script>

</body>
</html>

